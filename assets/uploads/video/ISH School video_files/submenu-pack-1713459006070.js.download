"use strict";document.addEventListener("DOMContentLoaded",function(){var b={vertical:setupVerticalMenu,horizontal:setupHorizontalMenu};var a=Object.keys(b);var c=document.querySelectorAll(".page-block-nav nav");c.forEach(function(e){var d=e.dataset.type;if(a.includes(d)){b[d](e)}})});function setupVerticalMenu(d){var a=d.querySelectorAll("li > ul");var c=d.querySelector("li.current");a.forEach(function(e){b(e);setAriaControlsAttribute(e);setMaxHeightStyleProperty(e);if(!e.contains(c)){toggleCollapsibleSubmenu(e,{withAnimation:false,flipIcon:true})}});function b(g){var e=g.parentElement.querySelector("button");var f={withAnimation:true,flipIcon:true};attachEventListener(e,"keydown",function(h){handleButtonKeydown.call(this,h,f)});attachEventListener(e,"click",function(h){handleButtonClick.call(this,h,f)});attachEventListener(g,"keydown",function(h){handleSubMenuItemKeydown.call(this,h,f)})}}function setupHorizontalMenu(f){var c=f.querySelectorAll(":scope > ul > li");var b=f.querySelector("[aria-current]");c.forEach(function(h){if(h.contains(b)){h.classList.add("current")}var g=h.querySelector("ul");if(g){d(g);setAriaControlsAttribute(g);setMaxHeightStyleProperty(g);g.inert=true}});function d(j){var i=j.parentElement;var g=i.querySelector("button");var h={withAnimation:true,flipIcon:false};attachEventListener(i,"mouseenter",function(k){e.call(this,k,h)});attachEventListener(i,"mouseleave",function(k){a.call(this,k,h)});attachEventListener(g,"keydown",function(k){handleButtonKeydown.call(this,k,h)});attachEventListener(g,"click",function(k){handleButtonClick.call(this,k,h)});attachEventListener(j,"keydown",function(k){handleSubMenuItemKeydown.call(this,k,h)})}function e(h,g){if(!isAriaExpanded(this.querySelector("button"))){toggleCollapsibleSubmenu(this.querySelector("ul"),g)}}function a(h,g){if(isAriaExpanded(this.querySelector("button"))){toggleCollapsibleSubmenu(this.querySelector("ul"),g)}}}function setAriaControlsAttribute(b){var c=Date.now().toString(32)+Math.random().toString(16).replace(/\./g,"");b.id=c;var a=b.parentElement.querySelector("button");a.setAttribute("aria-controls",c)}function setMaxHeightStyleProperty(b){var a=Array.from(b.querySelectorAll(".title-wrapper"));var c=a.reduce(function(d,e){return d+e.offsetHeight},0);b.style.setProperty("--max-height",c)}function handleSubMenuItemKeydown(c,b){c.stopPropagation();if(isEscapeKeyEvent(c)){var a=this.previousElementSibling.querySelector("button");a.focus();toggleCollapsibleSubmenu(this,b)}}function handleButtonClick(c,a){var b=this.parentElement.nextElementSibling;toggleCollapsibleSubmenu(b,a)}function handleButtonKeydown(c,a){c.stopPropagation();if(isEscapeKeyEvent(c)&&isAriaExpanded(this)){var b=this.parentElement.nextElementSibling;toggleCollapsibleSubmenu(b,a)}}function toggleCollapsibleSubmenu(d,c){c=c||{};var a=d.parentElement.querySelector("button");var e=isAriaExpanded(a)?"false":"true";a.setAttribute("aria-expanded",e);if(c.flipIcon){var f=e==="true"?"minus":"plus";a.querySelector("svg").querySelector("use").setAttribute("xlink:href","/apps/webapps/next/global/blazer/icons/icons.svg#"+f)}var b=e==="true"?"expanded":"collapsed";d.className=b.concat(c.withAnimation?" animated":"");d.inert=e==="false"}function attachEventListener(c,b,d,a){a=a||false;c.addEventListener(b,d,a)}function isAriaExpanded(a){return a.getAttribute("aria-expanded")==="true"}function isEscapeKeyEvent(a){return(a.key==="Escape"||a.key==="Esc"||a.code==="Escape"||a.keyCode===38)};